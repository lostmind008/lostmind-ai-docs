<Info>
This content was automatically extracted from LostMindAI-TurboRepo.
For the most up-to-date information, refer to the source project.
</Info>

# Stripe API Version Decision

**Date**: September 19, 2025
**Status**: Decided - Keep 2023-10-16
**Context**: JustDropIt app build fixes and tech stack compatibility review

## Current State

- **Project**: Using Stripe API version `2023-10-16`
- **Tech Stack**: Next.js 15, React 19, TypeScript 5.x, Node.js 20
- **Implementation**: Consistent across all packages (billing, webhook handlers)

## Research Summary

### Latest Available Version

- **Current Stable**: `2025-08-27.basil` (as of September 2025)
- **New Versioning Model**: Biannual major releases (Acacia, Basil) with monthly updates
- **Breaking Changes**: Significant changes across 2 major release cycles since 2023-10-16

### Major Breaking Changes Since 2023-10-16

1. **Account API Restructuring** (Acacia Release)
   - `verification` hash → `requirements` hash
   - `legal_entity` → separate `individual`, `company`, `business_type` fields
   - Settings architecture consolidation

2. **Subscription Billing Changes** (Basil Release)
   - New flexible billing mode with different proration calculations
   - Enhanced trial period handling
   - Modified subscription lifecycle behavior

3. **Webhook Payload Changes**
   - Enhanced event structures with additional context
   - New event types requiring handler updates
   - Modified payment intent and account event payloads

## Decision Rationale

**KEEP 2023-10-16** for the following reasons:

### **Scope of Required Changes**

- Account API changes would require significant refactoring of webhook handlers
- Subscription billing modifications could affect existing billing logic
- Webhook payload restructuring requires comprehensive event handler updates

### **Current Implementation Stability**

- Billing package already uses 2023-10-16 consistently
- All webhook handlers designed for current API version
- No critical functionality gaps with current version

### **Tech Stack Compatibility**

- Current Stripe Node.js SDK v14.7.0 fully compatible with our stack
- Next.js 15, React 19, TypeScript 5.x work seamlessly with current version
- No blocking compatibility issues identified

### **Business Risk vs Benefit**

- Current version provides all required payment processing capabilities
- Upgrade would introduce significant testing and validation overhead
- New features in latest version not immediately needed for MVP

## Recommendation

1. **Immediate**: Continue with 2023-10-16 for stability and consistency
2. **Future Planning**: Schedule Stripe API upgrade as separate project for Q1 2026
3. **Monitoring**: Track Stripe's roadmap for upcoming changes and deprecation notices
4. **Documentation**: Ensure all Stripe integration uses consistent API version

## Implementation Impact

### What This Means Now

- ✅ All apps use Stripe API version 2023-10-16
- ✅ Consistent billing package implementation
- ✅ Stable webhook processing
- ✅ No immediate changes required

### Future Upgrade Considerations

- Plan 2-3 week development cycle for API upgrade
- Comprehensive testing of payment flows required
- Webhook endpoint migration and validation needed
- Account management functionality review required

## Technical Verification

**Compatibility Confirmed**:

- ✅ Next.js 15 + Stripe Node.js SDK
- ✅ React 19 + Stripe Components
- ✅ TypeScript 5.x + Stripe types
- ✅ Node.js 20 + Stripe SDK v14.7.0

**Current Implementation Quality**: Production-ready with enterprise-grade features

---

**Decision Owner**: Claude Code (Development AI)
**Review Date**: March 2026 (Q1 upgrade evaluation)
